<template>
  <div class="box">
    <div id="mapContainer">
<!--      <button class="btn" @click="outputlatlng">打印</button>-->
            <button class="btn" @click="getBack">返回</button>
    </div>
    <div class="zhezhao" v-if="popupFmshow">
      <div class="popup_fm">
        <div class="pop_head">
          阀门操作
          <input
            class="close_btn"
            type="button"
            value="X"
            @click="closePopup"
          />
        </div>
        <div class="pop_body">
          <div class="fm_name">
            <span>阀门名称：</span>
            <span style="margin-left: 10px">{{ fmName }}</span>
          </div>
          <div class="fm_state">
            阀门状态：
            <label
              ><input
                type="radio"
                name="fmState"
                :checked="curStatus"
                value="1"
              />开</label
            >
            <label style="margin-left: 40px"
              ><input
                type="radio"
                name="fmState"
                :checked="!curStatus"
                value="0"
              />关</label
            >
          </div>
          <button class="submit" @click="changePipelinestyle">应用</button>
          <button class="cancle" @click="closePopup">取消</button>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
let Cesium;
import selectEntity from "../assets/js/selectEntity";
import PubSub from "pubsub-js";

export default {
  name: "",
  data() {
    return {
      sArr01: [],
      xuhao: [],
      fmName: "",
      fmState: {
        fm01: 1,
        fm02: 1,
        fm03: 1,
        fm04: 1,
        fm05: 1,
      },
      popupFmshow: false,
      selectentity: null,
      publicPath: process.env.BASE_URL,
      tempPosition: [],
      newCesium3DTileFeature: null,
      propertyName: [],
      cesium3dtile: [],
      entityCollection: [],
      ways01: [
        121.02397033776825, 37.707912530443785, 55.5, 121.03295670898311,
        37.70792474573891, 55.5,
      ],
      ways12: [
        121.03295670898311, 37.70792474573891, 55.5, 121.0401657971911,
        37.70791997363325, 55.5,
      ],
      ways23: [
        121.0401657971911, 37.70791997363325, 55.5, 121.0426332722534,
        37.707920715090346, 55.5, 121.04263050126237, 37.702951696631274, 55.5,
        121.04231476678224, 37.702951132448064, 55.5,
      ],
      ways34: [
        121.04231476678224, 37.702951132448064, 55.5, 121.03607954209312,
        37.702949557349314, 55.5,
      ],
      ways45: [
        121.03607954209312, 37.702949557349314, 55.5, 121.03540060655486,
        37.70295005773386, 55.5, 121.03539549556325, 37.70273832310363, 55.5,
        121.03392872134442, 37.70273853340132, 55.5, 121.03392861671959,
        37.6974522108674, 55.5, 121.02808475839119, 37.6974514278077, 55.5,
      ],
      ways5e: [
        121.02808475839119, 37.6974514278077, 55.5, 121.02607312562806,
        37.6974487047661, 55.5, 121.02607416744407, 37.69830221603293, 55.5,
        121.02542495744689, 37.69830145485995, 55.5,
      ],
      ways0001: [
        121.04263368301751, 37.707920751178655, 55.5, 121.04769646717013,
        37.7079159679618, 55.5,
      ],
      ways0002: [
        121.04769646717013, 37.7079159679618, 55.5, 121.05183657520737,
        37.70792090744341, 55.5,
      ],
      ways0003: [
        121.05183657520737, 37.70792090744341, 55.5, 121.0518327351404,
        37.70610230888735, 55.5,
      ],
      ways0004: [
        121.0518327351404, 37.70610230888735, 55.5, 121.0518409240306,
        37.70344665731528, 55.5,
      ],
      ways0005: [
        121.0518409240306, 37.70344665731528, 55.5, 121.05214052655988,
        37.70344970188824, 55.5, 121.05213762199001, 37.70295186261771, 55.5,
        121.04818261768905, 37.702951817940736, 55.5,
      ],
      ways0006: [
        121.04818261768905, 37.702951817940736, 55.5, 121.04263388028129,
        37.702952107805466, 55.5,
      ],
      ways0007: [
        121.04304200679532, 37.70295063774588, 55.5, 121.04304348063225,
        37.700168619973425, 55.5,
      ],
      ways0008: [
        121.04304348063225, 37.700168619973425, 55.5, 121.04304168338012,
        37.69745477434889, 55.5,
      ],
      ways0009: [
        121.03393175745602, 37.6974506831783, 55.5, 121.03856630519492,
        37.69745230038052, 55.5,
      ],
      ways0010: [
        121.03856630519492, 37.69745230038052, 55.5, 121.04304168338012,
        37.69745477434889, 55.5,
      ],
      ways0011: [
        121.02607300472994, 37.69744930205746, 55.5, 121.02708304980636,
        37.69535375850542, 55.5,
      ],
      ways0012: [
        121.02708304980636, 37.69535375850542, 55.5, 121.02839000986852,
        37.692634650189426, 55.5,
      ],
      ways0013: [
        121.02839000986852, 37.692634650189426, 55.5, 121.03129847542381,
        37.692632789146366, 55.5,
      ],
      ways0014: [
        121.03129847542381, 37.692632789146366, 55.5, 121.03393489717696,
        37.69263384534865, 55.5,
      ],
      ways0015: [
        121.03392816332038, 37.697451521819595, 55.5, 121.03393279376958,
        37.6952087129252, 55.5,
      ],
      ways0016: [
        121.03393279376958, 37.6952087129252, 55.5, 121.03393489717696,
        37.69263384534865, 55.5,
      ],
      ways0017: [
        121.02637858177755, 37.70791677920999, 55.5, 121.02637686231407,
        37.70753338181528, 55.5, 121.02586035667888, 37.70753187217795, 55.5,
        121.02585060035874, 37.706983022118195, 55.5, 121.02586014443324,
        37.705491493164715, 55.5, 121.0257146331053, 37.705491404289305, 55.5,
        121.02570886600573, 37.70529126972944, 55.5, 121.02533468433825,
        37.70528572483115, 55.5, 121.02532744659266, 37.70494132722464, 55.5,
      ],
      ways0018: [
        121.027049679238, 37.70791365590888, 55.5, 121.02705122979332,
        37.7061504508446, 55.5,
      ],
      ways0019: [
        121.02705122979332, 37.7061504508446, 55.5, 121.02704814610102,
        37.70520728869096, 55.5, 121.02586064463634, 37.705207732834445, 55.5,
        121.02586063242389, 37.70549142638642, 55.5,
      ],
      ways0020: [
        121.02532899451467, 37.70494170471894, 55.5, 121.02924124891439,
        37.70494042358542, 55.5,
      ],
      ways0021: [
        121.02924124891439, 37.70494042358542, 55.5, 121.03392964766171,
        37.704941802476434, 55.5,
      ],
      ways0022: [
        121.03392851510891, 37.70791735881732, 55.5, 121.0339281198198,
        37.706409079825136, 55.5,
      ],
      ways0023: [
        121.0339281198198, 37.706409079825136, 55.5, 121.03392964766171,
        37.704941802476434, 55.5,
      ],
      ways0024: [
        121.03392964766171, 37.704941802476434, 55.5, 121.03393009635546,
        37.702738245098374, 55.5,
      ],
      ways0025: [
        121.02607100673511, 37.70494192410869, 55.5, 121.02607665407398,
        37.70174248976743, 55.5,
      ],
      ways0026: [
        121.02607665407398, 37.70174248976743, 55.5, 121.02607399534865,
        37.69830344207091, 55.5,
      ],
      ways0027: [
        121.03393129600252, 37.69893968340551, 55.5, 121.0300716123384,
        37.69893734138283, 55.5,
      ],
      ways0028: [
        121.0300716123384, 37.69893734138283, 55.5, 121.02607324828782,
        37.69893428566017, 55.5,
      ],
      ways0029: [
        121.0253269000868, 37.704941184372956, 55.5, 121.025158794454,
        37.704939713902924, 55.5, 121.02515373592489, 37.70284307040715, 55.5,
      ],
      ways0030: [
        121.02515373592489, 37.70284307040715, 55.5, 121.0251568400999,
        37.70017865837208, 55.5,
      ],
      ways0031: [
        121.0251568400999, 37.70017865837208, 55.5, 121.02516138901262,
        37.697445017482735, 55.5,
      ],
      ways0032: [
        121.02516138901262, 37.697445017482735, 55.5, 121.02515925325349,
        37.6946467849398, 55.5,
      ],
      ways0033: [
        121.02515925325349, 37.6946467849398, 55.5, 121.02516356928355,
        37.69324454889384, 55.5, 121.02400448008189, 37.69325053600341, 55.5,
      ],
      ways0034: [
        121.02516356928355, 37.69324454889384, 55.5, 121.02516650344951,
        37.692633795114894, 55.5, 121.02838798174203, 37.692634582335494, 55.5,
      ],
      ways0035: [
        121.03227065198062, 37.69263655978646, 55.5, 121.03227748158186,
        37.692148309236565, 55.5, 121.03276149028486, 37.69214654648134, 55.5,
        121.03276149028486, 37.69214654648134, 70.5, 121.03304657313039,
        37.69214542410291, 70.5, 121.03304657313039, 37.69214542410291, 55.5,
        121.0331583928404, 37.69214257649049, 55.5,
      ],
      ways0036: [
        121.0331583928404, 37.69214257649049, 55.5, 121.03316634390127,
        37.68976709158803, 55.5,
      ],
      ways0037: [
        121.03316634390127, 37.68976709158803, 55.5, 121.03316943391866,
        37.688744266754654, 55.5, 121.03376457582223, 37.6887445347431, 55.5,
        121.03376457582223, 37.6887445347431, 70.5, 121.03410887245013,
        37.68874503298524, 70.5, 121.03410887245013, 37.68874503298524, 55.5,
      ],
      ways0038: [
        121.03410887245013, 37.68874503298524, 55.5, 121.03701527413946,
        37.68874107078268, 55.5,
      ],
      ways0039: [
        121.03701527413946, 37.68874107078268, 55.5, 121.03702192445081,
        37.68686779016725, 55.5,
      ],
      ways0040: [
        121.03702192445081, 37.68686779016725, 55.5, 121.04029895655964,
        37.686863263784154, 55.5,
      ],
      ways0041: [
        121.04029895655964, 37.686863263784154, 55.5, 121.04304617780473,
        37.686861643644704, 55.5,
      ],
      ways0042: [
        121.0339346608477, 37.69263560485791, 55.5, 121.03393574286352,
        37.69055687457569, 55.5,
      ],
      ways0043: [
        121.03393574286352, 37.69055687457569, 55.5, 121.03394119943695,
        37.68827950401607, 55.5,
      ],
      ways0044: [
        121.03394119943695, 37.68827950401607, 55.5, 121.0355701862992,
        37.688274669535964, 55.5, 121.03557529859039, 37.687444574052, 55.5,
        121.03453752908263, 37.68744764969014, 55.5,
      ],
      ways0045: [
        121.04304317750673, 37.69745278420367, 55.5, 121.04304444354761,
        37.694884578709456, 55.5,
      ],
      ways0046: [
        121.04304444354761, 37.694884578709456, 55.5, 121.04304419814387,
        37.692374851546106, 55.5,
      ],
      ways0047: [
        121.04304419814387, 37.692374851546106, 55.5, 121.03842150026593,
        37.6923702591218, 55.5,
      ],
      ways0048: [
        121.03842150026593, 37.6923702591218, 55.5, 121.0341012117474,
        37.6923761819818, 55.5,
      ],
      ways0049: [
        121.0341012117474, 37.6923761819818, 55.5, 121.0341012117474,
        37.6923761819818, 70.5, 121.03376500493414, 37.69237382952441, 70.5,
        121.03376500493414, 37.69237382952441, 55.5, 121.03246725607046,
        37.692375742542424, 55.5,
      ],
      ways0050: [
        121.04304419814387, 37.692374851546106, 55.5, 121.04304384709529,
        37.68960332127506, 55.5,
      ],
      ways0051: [
        121.04304384709529, 37.68960332127506, 55.5, 121.04304595455487,
        37.68686199146137, 55.5,
      ],
      ways0052: [
        121.04304595455487, 37.68686199146137, 55.5, 121.04304015534349,
        37.685359557512434, 55.5, 121.04181624260814, 37.68535283410701, 55.5,
      ],
      ways0053: [
        121.04181624260814, 37.68535283410701, 55.5, 121.04015073522174,
        37.68535019239818, 55.5, 121.04014858409711, 37.68412019862072, 55.5,
        121.04164977076309, 37.68368946703536, 55.5,
      ],
      ways0054: [
        121.04304190725836, 37.697454077119865, 55.5, 121.04801836864395,
        37.69745328505716, 55.5,
      ],
      ways0055: [
        121.04801836864395, 37.69745328505716, 55.5, 121.05183809016151,
        37.697453672478176, 55.5,
      ],
      ways0056: [
        121.05183313266554, 37.70007465505769, 55.5, 121.05183809016151,
        37.697453672478176, 55.5,
      ],
      ways0057: [
        121.05183454269614, 37.70295269956616, 55.5, 121.05183313266554,
        37.70007465505769, 55.5,
      ],
      ways0058: [
        121.05183454269614, 37.70295269956616, 55.5, 121.05633903968315,
        37.70295244776392, 55.5,
      ],
      ways0059: [
        121.05633903968315, 37.70295244776392, 55.5, 121.06102115321204,
        37.70295436319349, 55.5,
      ],
      ways0060: [
        121.06102115321204, 37.70295436319349, 55.5, 121.06102115321204,
        37.70295436319349, 70.5, 121.06135841087729, 37.70295340057657, 70.5,
        121.06135841087729, 37.70295340057657, 55.5, 121.062052247801,
        37.702949465546524, 55.5, 121.06214305410235, 37.70272308453498, 55.5,
        121.06189769657323, 37.702721008752455, 55.5,
      ],
      ways0061: [
        121.06189769657323, 37.702721008752455, 55.5, 121.0618933583599,
        37.70034238365267, 55.5,
      ],
      ways0062: [
        121.0618933583599, 37.70034238365267, 55.5, 121.06189474779254,
        37.69802915950388, 55.5,
      ],
      ways0063: [
        121.06189474779254, 37.69802915950388, 55.5, 121.06189474779254,
        37.69802915950388, 70.5, 121.06226634599616, 37.69802764556903, 70.5,
        121.06226943027924, 37.697318148948675, 70.5, 121.06226943027924,
        37.697318148948675, 55.5,
      ],
      ways0064: [
        121.06226943027924, 37.697318148948675, 55.5, 121.06658290917665,
        37.69731529875252, 55.5,
      ],
      ways0065: [
        121.06658290917665, 37.69731529875252, 55.5, 121.07090868924838,
        37.697312404394, 55.5,
      ],
      ways0066: [
        121.07090868924838, 37.697312404394, 55.5, 121.07406097374216,
        37.697315536892056, 55.5,
      ],
      ways0067: [
        121.0518370170885, 37.707921195294674, 55.5, 121.0567692382513,
        37.70792032718032, 55.5,
      ],
      ways0068: [
        121.0567692382513, 37.70792032718032, 55.5, 121.06118775510794,
        37.70792030953314, 55.5,
      ],
      ways0069: [
        121.06118775510794, 37.70792030953314, 55.5, 121.0611892104376,
        37.7056993596888, 55.5,
      ],
      ways0070: [
        121.0611892104376, 37.7056993596888, 55.5, 121.06119027219556,
        37.70300333590526, 55.5,
      ],
      ways0071: [
        121.06119027219556, 37.70300333590526, 55.5, 121.06119149799213,
        37.70009511960216, 55.5,
      ],
      ways0072: [
        121.06119149799213, 37.70009511960216, 55.5, 121.06119046832902,
        37.69745268038703, 55.5,
      ],
      ways0073: [
        121.06119046832902, 37.69745268038703, 55.5, 121.06118858927321,
        37.69488792640881, 55.5,
      ],
      ways0074: [
        121.06118858927321, 37.69488792640881, 55.5, 121.06119019496055,
        37.69237820320501, 55.5,
      ],
      ways0075: [
        121.06119019496055, 37.69237820320501, 55.5, 121.06118984620369,
        37.68989934602191, 55.5,
      ],
      ways0076: [
        121.06118984620369, 37.68989934602191, 55.5, 121.06119102100138,
        37.68742152870702, 55.5,
      ],
      ways0077: [
        121.06119102100138, 37.68742152870702, 55.5, 121.0611890981544,
        37.68454062248238, 55.5,
      ],
      ways0078: [
        121.0611890981544, 37.68454062248238, 55.5, 121.06119247510873,
        37.68223433822806, 55.5,
      ],
      ways0079: [
        121.05183723083977, 37.697450873406524, 55.5, 121.05648373589314,
        37.69745341567852, 55.5,
      ],
      ways0080: [
        121.05648373589314, 37.69745341567852, 55.5, 121.06119012096023,
        37.69745712020411, 55.5,
      ],
      ways0081: [
        121.05183723083977, 37.697450873406524, 55.5, 121.05183596964181,
        37.69505527019353, 55.5,
      ],
      ways0082: [
        121.05183596964181, 37.69505527019353, 55.5, 121.0518360278419,
        37.6923743067894, 55.5,
      ],
      ways0083: [
        121.0518360278419, 37.6923743067894, 55.5, 121.05678334266567,
        37.69237098269011, 55.5,
      ],
      ways0084: [
        121.05678334266567, 37.69237098269011, 55.5, 121.06119076718035,
        37.69238111023881, 55.5,
      ],
      ways0085: [
        121.0518360278419, 37.6923743067894, 55.5, 121.05184166288106,
        37.691618414703946, 55.5, 121.05204121692178, 37.69161567383928, 55.5,
        121.0520422086227, 37.68958140261039, 55.5,
      ],
      ways0086: [
        121.0520422086227, 37.68958140261039, 55.5, 121.05204283636812,
        37.687422082302525, 55.5,
      ],
      ways0087: [
        121.04304666472528, 37.692375752731564, 55.5, 121.04757768825479,
        37.69237372629017, 55.5,
      ],
      ways0088: [
        121.04757768825479, 37.69237372629017, 55.5, 121.05183552595085,
        37.69237609433033, 55.5,
      ],
      ways0089: [
        121.05204258176924, 37.68742350407668, 55.5, 121.04807835345711,
        37.68741869528973, 55.5,
      ],
      ways0090: [
        121.04807835345711, 37.68741869528973, 55.5, 121.0433317911632,
        37.68742106260722, 55.5,
      ],
      ways0091: [
        121.05204258176924, 37.68742350407668, 55.5, 121.0566111896742,
        37.68742020076054, 55.5,
      ],
      ways0092: [
        121.0566111896742, 37.68742020076054, 55.5, 121.06119185760645,
        37.68742567800897, 55.5,
      ],
      ways0093: [
        121.05182976479968, 37.687423888199106, 55.5, 121.05182815549259,
        37.68467081431614, 55.5,
      ],
      ways0094: [
        121.05182815549259, 37.68467081431614, 55.5, 121.051828094891,
        37.68201134699799, 55.5,
      ],
      ways0095: [
        121.0518272151134, 37.682668700172094, 55.5, 121.05616940490346,
        37.682666057858164, 55.5,
      ],
      ways0096: [
        121.05616940490346, 37.682666057858164, 55.5, 121.06119078043523,
        37.682666915931236, 55.5,
      ],
      ways0097: [
        121.06068945595844, 37.707922446186544, 55.5, 121.06068945595844,
        37.707922446186544, 70.5, 121.06106803383729, 37.70792403645149, 70.5,
        121.06107612969278, 37.708266627808136, 70.5, 121.06107612969278,
        37.708266627808136, 55.5, 121.05958228094372, 37.70826376840209, 55.5,
      ],
      ways0098: [
        121.05958228094372, 37.70826376840209, 55.5, 121.05619937702342,
        37.708263625924836, 55.5,
      ],
      ways0099: [
        121.05651589862475, 37.708263365667925, 55.5, 121.05652412323072,
        37.70910547030967, 55.5, 121.05664861720592, 37.70911294004711, 55.5,
        121.05665305118252, 37.709920627448845, 55.5, 121.05614921881607,
        37.70992003094316, 55.5,
      ],
      ways0100: [
        121.05614921881607, 37.70992003094316, 55.5, 121.05439325395594,
        37.70991342303099, 55.5, 121.05439209047306, 37.70871711354325, 55.5,
      ],
      ways0101: [
        121.05665404780115, 37.70991940352783, 55.5, 121.05665266587641,
        37.71162934422842, 55.5,
      ],
      ways0102: [
        121.05665266587641, 37.71162934422842, 55.5, 121.05665591144525,
        37.712897784260704, 55.5,
      ],
      ways0103: [
        121.05665591144525, 37.712897784260704, 55.5, 121.05699350664239,
        37.71290017707256, 55.5, 121.05699719034068, 37.71393679542949, 55.5,
      ],
      ways0104: [
        121.05699719034068, 37.71393679542949, 55.5, 121.05910195074848,
        37.71393542113961, 55.5,
      ],
      ways0105: [
        121.05910195074848, 37.71393542113961, 55.5, 121.06130145369852,
        37.71394066531219, 55.5,
      ],
      ways0106: [
        121.05665302129194, 37.71035613071162, 55.5, 121.05906904769998,
        37.71035742939158, 55.5,
      ],
      ways0107: [
        121.05906904769998, 37.71035742939158, 55.5, 121.0613024214837,
        37.710355677790204, 55.5,
      ],
      ways0108: [
        121.05665266587641, 37.71162934422842, 55.5, 121.05911028391381,
        37.71162359153066, 55.5,
      ],
      ways0109: [
        121.05911028391381, 37.71162359153066, 55.5, 121.06130217471913,
        37.71162917534822, 55.5,
      ],
      ways0110: [
        121.05699350664239, 37.71290017707256, 55.5, 121.05909118696059,
        37.7128966498808, 55.5,
      ],
      ways0111: [
        121.05909118696059, 37.7128966498808, 55.5, 121.06130191921135,
        37.71290032047024, 55.5,
      ],
      ways0112: [
        121.0613024214837, 37.710355677790204, 55.5, 121.06130217471913,
        37.71162917534822, 55.5,
      ],
      ways0113: [
        121.06130217471913, 37.71162917534822, 55.5, 121.06130191921135,
        37.71290032047024, 55.5,
      ],
      ways0114: [
        121.06130191921135, 37.71290032047024, 55.5, 121.06130324079754,
        37.71331609782899, 55.5, 121.06147125084479, 37.71332271075965, 55.5,
        121.06147403096115, 37.71351527406121, 55.5, 121.06130137837779,
        37.71352427451581, 55.5, 121.06130145369852, 37.71394066531219, 55.5,
      ],
      ways0115: [
        121.06107617705001, 37.70826696334589, 55.5, 121.06130374525264,
        37.708264281962634, 55.5, 121.06130102649047, 37.710355303505615, 55.5,
      ],
      ways0116: [
        121.05813181249344, 37.71035623102417, 55.5, 121.05813205212188,
        37.71162731705628, 55.5,
      ],
      ways0117: [
        121.05813205212188, 37.71162731705628, 55.5, 121.05813453070061,
        37.7129000706233, 55.5,
      ],
      ways0118: [
        121.05813364310013, 37.71226433476161, 55.5, 121.0596882139819,
        37.7122620303137, 55.5,
      ],
      ways0119: [
        121.0596882139819, 37.7122620303137, 55.5, 121.06130189452035,
        37.71226211132149, 55.5,
      ],
      ways0120: [
        121.06130299682974, 37.70826435002553, 55.5, 121.06645797970418,
        37.708261893479985, 55.5,
      ],
      ways0121: [
        121.06645797970418, 37.708261893479985, 55.5, 121.07168993367411,
        37.70826078728704, 55.5,
      ],
      ways0122: [
        121.07168993367411, 37.70826078728704, 55.5, 121.07168985731657,
        37.71109762982175, 55.5,
      ],
      ways0123: [
        121.07168985731657, 37.71109762982175, 55.5, 121.07168971123751,
        37.71394041849023, 55.5,
      ],
      ways0124: [
        121.06665801078643, 37.71393581425029, 55.5, 121.07168971123751,
        37.71394041849023, 55.5,
      ],
      ways0125: [
        121.06130056653144, 37.71393997399001, 55.5, 121.06665801078643,
        37.71393581425029, 55.5,
      ],
      ways0126: [
        121.06130301698445, 37.70869960532868, 55.5, 121.0619738215849,
        37.70869822083781, 55.5, 121.06220812005833, 37.708582187923426, 55.5,
        121.06556084518304, 37.708577677812926, 55.5,
      ],
      ways0127: [
        121.06556084518304, 37.708577677812926, 55.5, 121.07074361507786,
        37.70858418805343, 55.5,
      ],
      ways0128: [
        121.07074361507786, 37.70858418805343, 55.5, 121.07074882794836,
        37.711225885811515, 55.5,
      ],
      ways0129: [
        121.07074882794836, 37.711225885811515, 55.5, 121.07074496322251,
        37.71352868619528, 55.5,
      ],
      ways0130: [
        121.07074496322251, 37.71352868619528, 55.5, 121.07036510224408,
        37.713705029393786, 55.5, 121.06933444923182, 37.71370363469238, 55.5,
        121.06932074553795, 37.71345213617304, 55.5, 121.06878647452714,
        37.71345169295966, 55.5,
      ],
      ways0131: [
        121.06878647452714, 37.71345169295966, 55.5, 121.0687798743402,
        37.71370465451001, 55.5, 121.06768246562041, 37.71370282863353, 55.5,
        121.0676704172617, 37.71345103732604, 55.5, 121.06699071469512,
        37.71344473973497, 55.5, 121.06698934676984, 37.71394042831457, 55.5,
      ],
      ways0132: [
        121.06704766268857, 37.70858184190097, 55.5, 121.06704984691063,
        37.711580245919635, 55.5,
      ],
      ways0133: [
        121.06704984691063, 37.711580245919635, 55.5, 121.06704847578806,
        37.71308007993907, 55.5, 121.0668965578545, 37.71308535041708, 55.5,
        121.06689294614851, 37.713265635451485, 55.5, 121.06698899121574,
        37.71326698378675, 55.5, 121.06699043272363, 37.71344412872388, 55.5,
      ],
      ways0134: [
        121.06130208031792, 37.71220665824901, 55.5, 121.06419058390259,
        37.71220814769108, 55.5,
      ],
      ways0135: [
        121.06419058390259, 37.71220814769108, 55.5, 121.06705078374836,
        37.71220607557037, 55.5,
      ],
      ways0136: [
        121.06130272590696, 37.71035475552628, 55.5, 121.06215386454936,
        37.71035199093815, 55.5, 121.06215801657368, 37.71023410251824, 55.5,
        121.06386090140258, 37.71022721039841, 55.5,
      ],
      ways0137: [
        121.06386090140258, 37.71022721039841, 55.5, 121.06704940557228,
        37.710228261192626, 55.5,
      ],
      ways0138: [
        121.06704940557228, 37.710228261192626, 55.5, 121.07074971740214,
        37.710226829987526, 55.5,
      ],
      ways0139: [
        121.06705025136951, 37.71063484419149, 55.5, 121.07074926757736,
        37.71063751537289, 55.5,
      ],
      ways0140: [
        121.0670494260032, 37.711227275201956, 55.5, 121.07074951012814,
        37.711225785199325, 55.5,
      ],
      ways0141: [
        121.06705036869472, 37.712515712584036, 55.5, 121.070751719322,
        37.712515662026455, 55.5,
      ],
      ways0142: [
        121.07168864870523, 37.708259933030895, 55.5, 121.07168972012593,
        37.705617500268716, 55.5,
      ],
      ways0143: [
        121.07168972012593, 37.705617500268716, 55.5, 121.07169062676365,
        37.70271889227574, 55.5,
      ],
      ways0144: [
        121.06679034488491, 37.702720237525206, 55.5, 121.07169062676365,
        37.70271889227574, 55.5,
      ],
      ways0145: [
        121.06214159102318, 37.702723090176114, 55.5, 121.06679034488491,
        37.702720237525206, 55.5,
      ],
      ways0146: [
        121.07169045484437, 37.70509109208112, 55.5, 121.07066037199856,
        37.705093821628616, 55.5, 121.07066037199856, 37.705093821628616, 70.5,
        121.07031833873135, 37.70509235132664, 70.5, 121.07031833873135,
        37.70509235132664, 55.5, 121.06846349787052, 37.70509150852895, 55.5,
      ],
      ways0147: [
        121.06846349787052, 37.70509150852895, 55.5, 121.06251581214201,
        37.70509072328189, 55.5,
      ],
      ways0148: [
        121.0625153912611, 37.705090524699386, 55.5, 121.06252084380377,
        37.707274671025694, 55.5,
      ],
      ways0149: [
        121.06252084380377, 37.707274671025694, 55.5, 121.0669297930081,
        37.70727814242593, 55.5,
      ],
      ways0150: [
        121.0669297930081, 37.70727814242593, 55.5, 121.07048869910693,
        37.7072722904337, 55.5,
      ],
      ways0151: [
        121.07048869910693, 37.7072722904337, 55.5, 121.07048866871365,
        37.70512122418206, 55.5,
      ],
      ways0152: [
        121.07048866871365, 37.70512122418206, 55.5, 121.07047569394102,
        37.703376379864444, 55.5,
      ],
      ways0153: [
        121.07047569394102, 37.703376379864444, 55.5, 121.06668789501526,
        37.703365150360845, 55.5,
      ],
      ways0154: [
        121.06668789501526, 37.703365150360845, 55.5, 121.06252624826658,
        37.703374324215645, 55.5,
      ],
      ways0155: [
        121.06252624826658, 37.703374324215645, 55.5, 121.0625153912611,
        37.705090524699386, 55.5,
      ],
      ways0156: [
        121.0658098058867, 37.70509465014784, 55.5, 121.0658106161298,
        37.70337214660526, 55.5,
      ],
      ways0157: [
        121.06593467712635, 37.705094465941585, 55.5, 121.06593500101206,
        37.70727642613866, 55.5,
      ],
      ways0158: [
        121.0676407146599, 37.70509325075406, 55.5, 121.06764274809846,
        37.70727697735008, 55.5,
      ],
      ways0159: [
        121.06404015395864, 37.70727883573814, 55.5, 121.06404294580514,
        37.70524404108809, 55.5,
      ],
      ways0160: [
        121.06189418080365, 37.698028013126724, 55.5, 121.0618972599711,
        37.697635230963485, 55.5, 121.0637766662394, 37.697629478565986, 55.5,
      ],
      ways0161: [
        121.0637766662394, 37.697629478565986, 55.5, 121.06675480838615,
        37.697628707595356, 55.5,
      ],
      ways0162: [
        121.06675480838615, 37.697628707595356, 55.5, 121.07098862099528,
        37.697629055118476, 55.5,
      ],
      ways0163: [
        121.07098862099528, 37.697629055118476, 55.5, 121.0756370837502,
        37.69763388215702, 55.5,
      ],
      ways0164: [
        121.07168966692582, 37.70271979889837, 55.5, 121.0716897434662,
        37.700321164206116, 55.5,
      ],
      ways0165: [
        121.0716897434662, 37.700321164206116, 55.5, 121.07169191597507,
        37.69763242247055, 55.5,
      ],
      ways0166: [
        121.0716898083947, 37.713940540968544, 55.5, 121.07220280294447,
        37.71394151528015, 55.5, 121.07221109482825, 37.713878287439236, 55.5,
        121.0758656646877, 37.71387449064923, 55.5,
      ],
      ways0167: [
        121.0758656646877, 37.71387449064923, 55.5, 121.08207001641708,
        37.71387718749001, 55.5,
      ],
      ways0168: [
        121.08207001641708, 37.71387718749001, 55.5, 121.09013763234731,
        37.713874339447464, 55.5,
      ],
      ways0169: [
        121.09013763234731, 37.713874339447464, 55.5, 121.09715395003714,
        37.71387583071549, 55.5,
      ],
      ways0170: [
        121.08207001641708, 37.71387718749001, 55.5, 121.08206992255838,
        37.71127972128516, 55.5,
      ],
      ways0171: [
        121.08206992255838, 37.71127972128516, 55.5, 121.08206909569644,
        37.708262320275146, 55.5,
      ],
      ways0172: [
        121.07169416392159, 37.70825943631587, 55.5, 121.07735969935406,
        37.708261499611325, 55.5,
      ],
      ways0173: [
        121.07735969935406, 37.708261499611325, 55.5, 121.08207223041164,
        37.708260418747166, 55.5,
      ],
      ways0174: [
        121.08207223041164, 37.708260418747166, 55.5, 121.08828790587148,
        37.70825755315682, 55.5,
      ],
      ways0175: [
        121.08828790587148, 37.70825755315682, 55.5, 121.08829618889037,
        37.70761738611558, 55.5, 121.08943306104337, 37.70761108608932, 55.5,
      ],
      ways0176: [
        121.08943306104337, 37.70761108608932, 55.5, 121.09243390917787,
        37.707614025186636, 55.5,
      ],
      ways0177: [
        121.08871867071109, 37.70761438308397, 55.5, 121.08872030405385,
        37.70720501717409, 55.5, 121.09140179628122, 37.70625080509406, 55.5,
      ],
      ways0178: [
        121.08206661597963, 37.709972417656104, 55.5, 121.08761307926082,
        37.709968854691304, 55.5,
      ],
      ways0179: [
        121.08761307926082, 37.709968854691304, 55.5, 121.09454458354777,
        37.70996761441592, 55.5,
      ],
      ways0180: [
        121.09454458354777, 37.70996761441592, 55.5, 121.0954867571507,
        37.70996714109108, 55.5, 121.09549620897674, 37.71021617038533, 55.5,
        121.09715074900167, 37.71021730304978, 55.5,
      ],
      ways0181: [
        121.08324413450431, 37.70997010146955, 55.5, 121.08324891920553,
        37.7120824608018, 55.5,
      ],
      ways0182: [
        121.08324891920553, 37.7120824608018, 55.5, 121.0892571603325,
        37.71207914395801, 55.5,
      ],
      ways0183: [
        121.0892571603325, 37.71207914395801, 55.5, 121.09501893097021,
        37.71207305394667, 55.5,
      ],
      ways0184: [
        121.09501893097021, 37.71207305394667, 55.5, 121.09502885277104,
        37.71023836768321, 55.5,
      ],
      ways0185: [
        121.09502885277104, 37.71023836768321, 55.5, 121.09502750096617,
        37.70859302000932, 55.5,
      ],
      ways0186: [
        121.09527413034756, 37.71387358396878, 55.5, 121.09526818950968,
        37.71262482859614, 55.5,
      ],
      ways0187: [
        121.09526818950968, 37.71262482859614, 55.5, 121.09475452166711,
        37.712618937721714, 55.5, 121.09474340299542, 37.71218052389258, 55.5,
        121.0935772650934, 37.712174894598675, 55.5,
      ],
      ways0188: [
        121.0935772650934, 37.712174894598675, 55.5, 121.084475421596,
        37.71217320779206, 55.5,
      ],
      ways0189: [
        121.084475421596, 37.71217320779206, 55.5, 121.0822328042448,
        37.712176546245566, 55.5, 121.0822328042448, 37.712176546245566, 70.5,
        121.08189944233573, 37.712176448299005, 70.5, 121.08189944233573,
        37.712176448299005, 55.5,
      ],
      ways0190: [
        121.08189944233573, 37.712176448299005, 55.5, 121.07728985657619,
        37.71217890237233, 55.5,
      ],
      ways0191: [
        121.07728985657619, 37.71217890237233, 55.5, 121.0728829203037,
        37.71218188264579, 55.5,
      ],
      ways0192: [
        121.08408617975032, 37.7099688561, 55.5, 121.08408899713723,
        37.71208386212669, 55.5,
      ],
      ways0193: [
        121.08986481638021, 37.70859425062175, 55.5, 121.08986619384766,
        37.71045756561867, 55.5,
      ],
      ways0194: [
        121.08986619384766, 37.71045756561867, 55.5, 121.08987422164047,
        37.7120851107427, 55.5,
      ],
      ways0195: [
        121.08761585663794, 37.708262625577355, 55.5, 121.08761107196898,
        37.70996984381602, 55.5,
      ],
      ways0196: [
        121.09092446125553, 37.70859568218864, 55.5, 121.09092070639063,
        37.709966486390826, 55.5,
      ],
      ways0197: [
        121.0932863753905, 37.70859556191432, 55.5, 121.09328339044696,
        37.709968745989855, 55.5,
      ],
      ways0198: [
        121.0894324803293, 37.707612026045986, 55.5, 121.08943863812706,
        37.708590832753686, 55.5, 121.09146897883687, 37.70859408188299, 55.5,
      ],
      ways0199: [
        121.09146897883687, 37.70859408188299, 55.5, 121.09467836743875,
        37.708589131822244, 55.5,
      ],
      ways0200: [
        121.09467836743875, 37.708589131822244, 55.5, 121.0971512543906,
        37.70858924700413, 55.5,
      ],
      ways0201: [
        121.07168940793345, 37.7027189499488, 55.5, 121.07682634607721,
        37.702722888873254, 55.5,
      ],
      ways0202: [
        121.07682634607721, 37.702722888873254, 55.5, 121.08208167305143,
        37.70272449915228, 55.5,
      ],
      ways0203: [
        121.07726367950777, 37.70272281994966, 55.5, 121.0772687515978,
        37.70304744048085, 55.5, 121.07741515089114, 37.70305171856329, 55.5,
        121.07742055809348, 37.70377716270055, 55.5,
      ],
      ways0204: [
        121.07742055809348, 37.70377716270055, 55.5, 121.0774230542927,
        37.70550390808779, 55.5,
      ],
      ways0205: [
        121.0774230542927, 37.70550390808779, 55.5, 121.07742241331087,
        37.707919990884854, 55.5,
      ],
      ways0206: [
        121.07826703676135, 37.70272383863247, 55.5, 121.07827090409484,
        37.70310988400108, 55.5, 121.07884208326527, 37.70311384343503, 55.5,
        121.07884193300602, 37.70285399383951, 55.5, 121.07884193300602,
        37.70285399383951, 70.5, 121.07883957250917, 37.702585924192526, 70.5,
        121.07883957250917, 37.702585924192526, 55.5, 121.07884237997352,
        37.70214623374737, 55.5,
      ],
      ways0207: [
        121.08094623296527, 37.70311310082359, 55.5, 121.08094288148354,
        37.70285490711773, 55.5, 121.08094288148354, 37.70285490711773, 70.5,
        121.08094525649108, 37.702588307247154, 70.5, 121.08094525649108,
        37.702588307247154, 55.5, 121.08094605380549, 37.70189139338351, 55.5,
      ],
      ways0208: [
        121.07742293181101, 37.70468174138161, 55.5, 121.08173466529365,
        37.70467695555254, 55.5,
      ],
      ways0209: [
        121.08173466529365, 37.70467695555254, 55.5, 121.08173378651321,
        37.703113921916284, 55.5,
      ],
      ways0210: [
        121.08173378651321, 37.703113921916284, 55.5, 121.07884164207778,
        37.70311315633702, 55.5,
      ],
      ways0211: [
        121.07742039926427, 37.70410076544683, 55.5, 121.0817388419396,
        37.70409666248215, 55.5,
      ],
      ways0212: [
        121.07884238561533, 37.70214674209593, 55.5, 121.07883551227548,
        37.70100676087106, 55.5,
      ],
      ways0213: [
        121.07883551227548, 37.70100676087106, 55.5, 121.07755562034829,
        37.70045083477793, 55.5,
      ],
      ways0214: [
        121.07755562034829, 37.70045083477793, 55.5, 121.0747374229939,
        37.70045159452715, 55.5,
      ],
      ways0215: [
        121.0747374229939, 37.70045159452715, 55.5, 121.07168960889452,
        37.70045217566226, 55.5,
      ],
      ways0216: [
        121.07473440620562, 37.70272293461302, 55.5, 121.0747374229939,
        37.70045159452715, 55.5,
      ],
      ways0217: [
        121.07640792258316, 37.70045174361844, 55.5, 121.07598275197917,
        37.69940092289204, 55.5,
      ],
      ways0218: [
        121.07598275197917, 37.69940092289204, 55.5, 121.07424435917797,
        37.6993977673246, 55.5,
      ],
      ways0219: [
        121.07424435917797, 37.6993977673246, 55.5, 121.0716892693033,
        37.699397545583146, 55.5,
      ],
      ways0220: [
        121.0742421720371, 37.70045275570497, 55.5, 121.07424435917797,
        37.6993977673246, 55.5,
      ],
      ways0221: [
        121.06226867519625, 37.6973176796269, 55.5, 121.06182130530307,
        37.697311545395124, 55.5, 121.06181500773693, 37.696926961878674, 55.5,
      ],
      ways0222: [
        121.06181500773693, 37.696926961878674, 55.5, 121.061819089263,
        37.69486669717917, 55.5,
      ],
      ways0223: [
        121.061819089263, 37.69486669717917, 55.5, 121.0618141831822,
        37.69243219941402, 55.5,
      ],
      ways0224: [
        121.0618141831822, 37.69243219941402, 55.5, 121.06181361829914,
        37.689849672910476, 55.5,
      ],
      ways0225: [
        121.06181361829914, 37.689849672910476, 55.5, 121.06181470747879,
        37.68755813042769, 55.5,
      ],
      ways0226: [
        121.06181470747879, 37.68755813042769, 55.5, 121.06181659571088,
        37.68539772204351, 55.5,
      ],
      ways0227: [
        121.06181659571088, 37.68539772204351, 55.5, 121.06182623592794,
        37.683735770644155, 55.5,
      ],
      ways0228: [
        121.06182623592794, 37.683735770644155, 55.5, 121.06203216350671,
        37.68372661130943, 55.5, 121.06203125430818, 37.68341468169282, 55.5,
        121.06203197353106, 37.68271913116533, 55.5,
      ],
      ways0229: [
        121.07136237777213, 37.6973164970004, 55.5, 121.07136122477152,
        37.695159469397446, 55.5,
      ],
      ways0230: [
        121.07136122477152, 37.695159469397446, 55.5, 121.07136473014523,
        37.692434181487215, 55.5,
      ],
      ways0231: [
        121.06665112011547, 37.69242997330309, 55.5, 121.07136473014523,
        37.692434181487215, 55.5,
      ],
      ways0232: [
        121.06181504265618, 37.692432347645365, 55.5, 121.06665112011547,
        37.69242997330309, 55.5,
      ],
      ways0233: [
        121.07196604998956, 37.692433670530555, 55.5, 121.07196503806901,
        37.68984858937695, 55.5,
      ],
      ways0234: [
        121.07196503806901, 37.68984858937695, 55.5, 121.0719627383772,
        37.68768236117717, 55.5,
      ],
      ways0235: [
        121.06181517668158, 37.687558172586584, 55.5, 121.06283661772811,
        37.687560982458294, 55.5, 121.0628478715765, 37.68768451718395, 55.5,
        121.06363187059108, 37.68768399961837, 55.5,
      ],
      ways0236: [
        121.06363187059108, 37.68768399961837, 55.5, 121.06796956596389,
        37.68767958381847, 55.5,
      ],
      ways0237: [
        121.06796956596389, 37.68767958381847, 55.5, 121.0719627383772,
        37.68768236117717, 55.5,
      ],
      ways0238: [
        121.0719627383772, 37.68768236117717, 55.5, 121.07196381243357,
        37.68471433479059, 55.5,
      ],
      ways0239: [
        121.07196381243357, 37.68471433479059, 55.5, 121.07094083401269,
        37.683266382547295, 55.5,
      ],
      ways0240: [
        121.07094083401269, 37.683266382547295, 55.5, 121.06952788521262,
        37.681273269152236, 55.5,
      ],
      ways0241: [
        121.06952788521262, 37.681273269152236, 55.5, 121.06834130269479,
        37.67960482776047, 55.5,
      ],
      ways0242: [
        121.06834130269479, 37.67960482776047, 55.5, 121.0658725181621,
        37.679603752866704, 55.5,
      ],
      ways0243: [
        121.0658725181621, 37.679603752866704, 55.5, 121.06235734954241,
        37.679605378488674, 55.5,
      ],
      ways0244: [
        121.06118982155783, 37.68716353207811, 55.5, 121.06153237416824,
        37.68716339969311, 55.5, 121.06153237416824, 37.68716339969311, 70.5,
        121.06193326290962, 37.68716422821943, 70.5, 121.06193326290962,
        37.68716422821943, 55.5, 121.062907650675, 37.68716526493416, 55.5,
        121.06291613505137, 37.687388955986876, 55.5,
      ],
      ways0245: [
        121.0618142257192, 37.687389989597335, 55.5, 121.06318600717958,
        37.68738762981859, 55.5, 121.06318246607687, 37.6869653436031, 55.5,
      ],
      ways0246: [
        121.06203073296996, 37.68341534128685, 55.5, 121.06255554390809,
        37.68341184097376, 55.5, 121.06256234364741, 37.68270069781685, 55.5,
        121.06391128862904, 37.682692597513864, 55.5, 121.0639112287673,
        37.682128220193135, 55.5,
      ],
      ways0247: [
        121.06255570688886, 37.68326873551871, 55.5, 121.06613380167468,
        37.68327121432169, 55.5,
      ],
      ways0248: [
        121.06613380167468, 37.68327121432169, 55.5, 121.0709401156005,
        37.6832712931201, 55.5,
      ],
      ways0249: [
        121.07191869804278, 37.69731748324897, 55.5, 121.071925517147,
        37.69692734807362, 55.5, 121.0725814600765, 37.69692488340403, 55.5,
      ],
      ways0250: [
        121.0725814600765, 37.69692488340403, 55.5, 121.07467740397588,
        37.69692391331372, 55.5,
      ],
      ways0251: [
        121.07467740397588, 37.69692391331372, 55.5, 121.07672669633932,
        37.6969261474253, 55.5,
      ],
      ways0252: [
        121.07672669633932, 37.6969261474253, 55.5, 121.07673480387669,
        37.69742706064573, 55.5, 121.07771635109489, 37.697432451213395, 55.5,
      ],
      ways0253: [
        121.07771635109489, 37.697432451213395, 55.5, 121.08140066480993,
        37.69743200776858, 55.5,
      ],
      ways0254: [
        121.08140066480993, 37.69743200776858, 55.5, 121.08618945152368,
        37.69743078570189, 55.5,
      ],
      ways0255: [
        121.08618945152368, 37.69743078570189, 55.5, 121.09015416692125,
        37.69743082698464, 55.5,
      ],
      ways0256: [
        121.07136663403136, 37.692433787889804, 55.5, 121.07950390640609,
        37.69243158933324, 55.5,
      ],
      ways0257: [
        121.07950390640609, 37.69243158933324, 55.5, 121.08624994744999,
        37.692434032168705, 55.5,
      ],
      ways0258: [
        121.08624994744999, 37.692434032168705, 55.5, 121.09203500101655,
        37.692432113915736, 55.5,
      ],
      ways0259: [
        121.09203500101655, 37.692432113915736, 55.5, 121.0920358505947,
        37.69472119534987, 55.5,
      ],
      ways0260: [
        121.0920358505947, 37.69472119534987, 55.5, 121.09229216404742,
        37.69472334044371, 55.5, 121.09229786553114, 37.69512127531563, 55.5,
      ],
      ways0261: [
        121.09229786553114, 37.69512127531563, 55.5, 121.09229747333916,
        37.695656684110055, 55.5, 121.09305981975709, 37.69565487742623, 55.5,
      ],
      ways0262: [
        121.08624994744999, 37.692434032168705, 55.5, 121.08626248156914,
        37.69471761349787, 55.5,
      ],
      ways0263: [
        121.08626248156914, 37.69471761349787, 55.5, 121.0920358505947,
        37.69472119534987, 55.5,
      ],
      ways0264: [
        121.08669506280887, 37.694721584524615, 55.5, 121.08670195024314,
        37.695649234744316, 55.5, 121.08851882011238, 37.69565440218663, 55.5,
      ],
      ways0265: [
        121.08851882011238, 37.69565440218663, 55.5, 121.09229747333916,
        37.695656684110055, 55.5,
      ],
      ways0266: [
        121.07196434266393, 37.68768318548159, 55.5, 121.07593326505517,
        37.687681264895716, 55.5,
      ],
      ways0267: [
        121.07593326505517, 37.687681264895716, 55.5, 121.07974853877454,
        37.68768164598071, 55.5,
      ],
      ways0268: [
        121.07974853877454, 37.68768164598071, 55.5, 121.08217508994622,
        37.6884839693261, 55.5,
      ],
      ways0269: [
        121.08217508994622, 37.6884839693261, 55.5, 121.08217715345228,
        37.69243205031003, 55.5,
      ],
      ways0270: [
        121.08217508994622, 37.6884839693261, 55.5, 121.08625131204515,
        37.68848642843017, 55.5,
      ],
      ways0271: [
        121.08625131204515, 37.68848642843017, 55.5, 121.08624861793004,
        37.69243302321109, 55.5,
      ],
      ways0272: [
        121.08625131204515, 37.68848642843017, 55.5, 121.09072407532389,
        37.68848279554682, 55.5,
      ],
      ways0273: [
        121.09072407532389, 37.68848279554682, 55.5, 121.09514694521904,
        37.688482331592375, 55.5,
      ],
      ways0274: [
        121.09514694521904, 37.688482331592375, 55.5, 121.09585411341843,
        37.68847653770147, 55.5, 121.0958681434313, 37.68796371083267, 55.5,
        121.09693684387743, 37.68795854851455, 55.5, 121.09808141556671,
        37.687794000382034, 55.5, 121.10009502714911, 37.68749554148319, 55.5,
        121.10227026163649, 37.687166348176994, 55.5, 121.1022795430363,
        37.68651478748613, 55.5,
      ],
      ways0275: [
        121.08624755053305, 37.69040653960882, 55.5, 121.09108390403891,
        37.69040232743441, 55.5,
      ],
      ways0276: [
        121.09108390403891, 37.69040232743441, 55.5, 121.09543088871844,
        37.69040105970604, 55.5,
      ],
      ways0277: [
        121.09543088871844, 37.69040105970604, 55.5, 121.09543122072675,
        37.68848360994436, 55.5,
      ],
      ways0278: [
        121.09203425366776, 37.69243122740567, 55.5, 121.0920340104542,
        37.690403167129496, 55.5,
      ],
      ways0279: [
        121.10227528980614, 37.686516170611185, 55.5, 121.10159102191281,
        37.686510187592155, 55.5, 121.10158812347257, 37.68559189413096, 55.5,
      ],
      ways0280: [
        121.10227528980614, 37.686516170611185, 55.5, 121.10600426723629,
        37.686512322007836, 55.5,
      ],
      ways0281: [
        121.10600426723629, 37.686512322007836, 55.5, 121.10986921107788,
        37.686514489264695, 55.5,
      ],
      ways0282: [
        121.10986921107788, 37.686514489264695, 55.5, 121.11338968206967,
        37.68651125838278, 55.5,
      ],
      ways0283: [
        121.11338968206967, 37.68651125838278, 55.5, 121.11706395384434,
        37.68651335739016, 55.5,
      ],
      ways0284: [
        121.11706395384434, 37.68651335739016, 55.5, 121.1210888916156,
        37.68650792614362, 55.5,
      ],
      ways0285: [
        121.1210888916156, 37.68650792614362, 55.5, 121.12453137329746,
        37.686508057495224, 55.5,
      ],
      ways0286: [
        121.12453137329746, 37.686508057495224, 55.5, 121.1287850714472,
        37.686504772792745, 55.5,
      ],
      ways0287: [
        121.1287850714472, 37.686504772792745, 55.5, 121.13199490492897,
        37.68649714011886, 55.5,
      ],
      ways0288: [
        121.13199490492897, 37.68649714011886, 55.5, 121.13199139257583,
        37.683328445151844, 55.5,
      ],
      ways0289: [
        121.13199139257583, 37.683328445151844, 55.5, 121.13199355997541,
        37.680306504421885, 55.5,
      ],
      ways0290: [
        121.13199486857685, 37.68536285609405, 55.5, 121.13700868431708,
        37.68536277694114, 55.5,
      ],
      ways0291: [
        121.13700868431708, 37.68536277694114, 55.5, 121.13952961508522,
        37.68136100421627, 55.5,
      ],
      ways0292: [
        121.13952961508522, 37.68136100421627, 55.5, 121.13747923644056,
        37.680296714250254, 55.5,
      ],
      ways0293: [
        121.13747923644056, 37.680296714250254, 55.5, 121.13199199610739,
        37.68030513994045, 55.5,
      ],
      ways0294: [
        121.13199199610739, 37.68030513994045, 55.5, 121.12866710355947,
        37.68030194340262, 55.5,
      ],
      ways0295: [
        121.12866710355947, 37.68030194340262, 55.5, 121.1245259637358,
        37.680306714565624, 55.5,
      ],
      ways0296: [
        121.1245259637358, 37.680306714565624, 55.5, 121.12082873847173,
        37.680307688428094, 55.5,
      ],
      ways0297: [
        121.12082873847173, 37.680307688428094, 55.5, 121.1170632583839,
        37.68031126041881, 55.5,
      ],
      ways0298: [
        121.1170632583839, 37.68031126041881, 55.5, 121.11331466278507,
        37.68031002123012, 55.5,
      ],
      ways0299: [
        121.11331466278507, 37.68031002123012, 55.5, 121.10986188484478,
        37.68031454922086, 55.5,
      ],
      ways0300: [
        121.10986188484478, 37.68031454922086, 55.5, 121.10588738263085,
        37.68031696909512, 55.5,
      ],
      ways0301: [
        121.10588738263085, 37.68031696909512, 55.5, 121.10289997864328,
        37.680316504853856, 55.5,
      ],
      ways0302: [
        121.10986102076423, 37.686514266941444, 55.5, 121.10986120306198,
        37.68325745964959, 55.5,
      ],
      ways0303: [
        121.10986120306198, 37.68325745964959, 55.5, 121.10985969242817,
        37.68031171788458, 55.5,
      ],
      ways0304: [
        121.10985969242817, 37.68031171788458, 55.5, 121.1098585034216,
        37.67754114139525, 55.5,
      ],
      ways0305: [
        121.1098585034216, 37.67754114139525, 55.5, 121.10985784182134,
        37.67464761820572, 55.5,
      ],
      ways0306: [
        121.1170665692882, 37.68651118429805, 55.5, 121.11706486420817,
        37.68309452693186, 55.5,
      ],
      ways0307: [
        121.11706486420817, 37.68309452693186, 55.5, 121.11705915301735,
        37.68031150434017, 55.5,
      ],
      ways0308: [
        121.11705915301735, 37.68031150434017, 55.5, 121.11706182562732,
        37.67733522951964, 55.5,
      ],
      ways0309: [
        121.11706182562732, 37.67733522951964, 55.5, 121.11706060933797,
        37.67465073712677, 55.5,
      ],
      ways0310: [
        121.12452909675865, 37.68650678130223, 55.5, 121.12453046916586,
        37.68339969527791, 55.5,
      ],
      ways0311: [
        121.12453046916586, 37.68339969527791, 55.5, 121.12452403847112,
        37.68030864533659, 55.5,
      ],
      fmNumber: 0,//双击选取的阀门编号
      curStatus: false,//开关状态显示
    };
  },
  mounted() {
    Cesium = this.Cesium;
    this.init();
    //双击时拿到阀门编号并弹窗，开关状态curStatus从fmState里面获取
    PubSub.subscribe("leftDoubleclick", (msg, data) => {
      if (data === 1 || data === 2 || data === 3 || data === 4 || data === 5) {
        this.fmName = "阀门0" + data;
        this.fmNumber = data;
        for (let key in this.fmState) {
          if (key.includes(data)) {
            this.curStatus = this.fmState[key];
          }
        }
        this.popupFmshow = true;
      }
    });
  },
  methods: {
    init() {
      //创建当前viewer的基础配置项
      let viewerOption = {
        animation: false,
        baseLayerPicker: false,
        fullscreenButton: false,
        geocoder: false,
        homeButton: false,
        timeline: false,
        infoBox: true,
        sceneModePicker: false,
        selectionIndicator: false,
        sceneMode: Cesium.SceneMode.SCENE3D,
        navigationHelpButton: false,
        navigationInstructionsInitiallyVisible: false,
        scene3DOnly: true,
        showRenderLoopErrors: false,
        orderIndependentTranslucency: false,
        skyAtmosphere: false,
        showAnimate: false,
        contextOptions: { webgl: { alpha: true } }, //允许透明
      };
      //cesium的token
      Cesium.Ion.defaultAccessToken =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxM2ExOTdjOS0wYWQ4LTQ4NzItOTUyMy1mMDBkNzhiNDJmYmQiLCJpZCI6NTE5NjMsImlhdCI6MTYxODM3OTMxMH0._ymFQ-VLMK9cxSL_WZZuSg5CZ6pSNA9Nn2v6q8Du3m8";
      //创建viewer
      window.viewer = new Cesium.Viewer("mapContainer", viewerOption);
      // 开启阴影
      // window.viewer.shadows=true
      // window.viewer.shadowMap.darkness=0.5
      // 获取相机高度变化
      // window.viewer.camera.changed.addEventListener(() => {
      //   let height = viewer.camera.positionCartographic.height;
      //   this.tempheight = 23000 / height;
      // });
      //不允许超出设置的经纬度范围
      window.viewer.scene.postRender.addEventListener(() => {
        //计算镜头范围方法，该方法会计算当前镜头地理坐标（弧度）范围并返回 west,east,north,south 4个范围参数
        let rectangle = viewer.camera.computeViewRectangle();
        //设置可浏览经纬度范围
        let Range = {
          east: 121.27544522858277,
          south: 37.792009550199325,
          west: 120.8785496852908,
          north: 37.617459151623116,
        };
        //地理坐标（弧度）转经纬度坐标
        // 弧度转为经纬度，west为左（西）侧边界的经度，以下类推
        let west = (rectangle.west / Math.PI) * 180;
        let north = (rectangle.north / Math.PI) * 180;
        let east = (rectangle.east / Math.PI) * 180;
        let south = (rectangle.south / Math.PI) * 180;
        // console.log(west,north,east,south);
        //超出范围将viewer视野设置为初始值
        if (
          west < Range.west ||
          north < Range.north ||
          east > Range.east ||
          south > Range.south
        ) {
          window.viewer.camera.setView({
            destination: Cesium.Cartesian3.fromDegrees(
              121.06487993541327,
              37.698367551958015,
              11000
            ),
            orientation: {
              heading: 6.281351946946347,
              pitch: -1.558636315283755,
              roll: 0,
            },
          });
        }
      });

      window.viewer._cesiumWidget._creditContainer.style.display = "none";

      //允许自定义浏览方式
      window.viewer.scene.screenSpaceCameraController.enableInputs = true;
      //关闭天空盒
      window.viewer.scene.skyBox.show = false;
      //关闭太阳、月亮、地球
      window.viewer.scene.sun.show = false;
      window.viewer.scene.moon.show = false;
      window.viewer.scene.globe.show = false;
      //禁止旋转
      // window.viewer.scene.screenSpaceCameraController.enableRotate = false;
      //禁止倾斜相机
      window.viewer.scene.screenSpaceCameraController.enableTilt = false;
      // window.viewer.scene.screenSpaceCameraController.enableLook = false;
      //设置背景
      // window.viewer.scene.backgroundColor = Cesium.Color.BLACK;
      // 关闭大气
      // window.viewer.scene.skyAtmosphere.show = false;
      // window.viewer.scene.screenSpaceCameraController.minimumZoomDistance = 500; //相机的高度的最小值
      window.viewer.scene.screenSpaceCameraController.maximumZoomDistance = 13000; //相机高度的最大值
      // window.viewer.scene.screenSpaceCameraController.lookEventTypes = [
      //   Cesium.CameraEventType.LEFT_DRAG,
      // ];
      //是否开启抗锯齿
      window.viewer.scene.fxaa = true;
      window.viewer.scene.postProcessStages.fxaa.enabled = true;
      // 缩放设置 重新设置缩放成员
      // window.viewer.scene.screenSpaceCameraController.zoomEventTypes = [
      //   Cesium.CameraEventType.MIDDLE_DRAG,
      //   Cesium.CameraEventType.WHEEL,
      //   Cesium.CameraEventType.PINCH,
      // ];

      // 偏斜平移
      // window.viewer.scene.screenSpaceCameraController.lookEventTypes = [ Cesium.CameraEventType.RIGHT_DRAG]

      // 平移 添加鼠标右键  鼠标右键平移
      // window.viewer.scene.screenSpaceCameraController.rotateEventTypes = [
      //   Cesium.CameraEventType.RIGHT_DRAG,
      // ];
      //设置初始位置
      window.viewer.camera.setView({
        destination: Cesium.Cartesian3.fromDegrees(
          121.06487993541327,
          37.698367551958015,
          11000
        ),
        orientation: {
          heading: 6.281351946946347,
          pitch: -1.558636315283755,
          roll: 0,
        },
      });
      // 亮度设置
      // let stages = viewer.scene.postProcessStages;
      // window.viewer.scene.brightness =  viewer.scene.brightness || stages.add(Cesium.PostProcessStageLibrary.createBrightnessStage());
      // window.viewer.scene.brightness.enabled = true;
      // window.viewer.scene.brightness.uniforms.brightness = Number(2);

      window.viewer.scene.light = new Cesium.DirectionalLight({
        direction: new Cesium.Cartesian3(
          6.281351946946347,
          -1.558636315283755,
          0
        ),
        intensity: 8,
      });
      // window.viewer.scene.light = new Cesium.SunLight({
      //   intensity:20
      // })
      this.loadModule();
    },
    loadModule() {
      //定义模型并设置模型的初始样式
      window.bg = new Cesium.Cesium3DTileset({
        url: this.publicPath + "bg/tileset.json",
      });
      window.bg.style = new Cesium.Cesium3DTileStyle({
        color: "rgb(0,0,0)",
        show: true,
      });
      window.fm = new Cesium.Cesium3DTileset({
        url: this.publicPath + "fm/tileset.json",
      });
      window.fm.style = new Cesium.Cesium3DTileStyle({
        color: "rgb(29,220,197)",
        show: true,
      });
      window.gx = new Cesium.Cesium3DTileset({
        url: this.publicPath + "gx/tileset.json",
      });
      window.gx.style = new Cesium.Cesium3DTileStyle({
        color: "rgba(158,183,208,0.5)",
        show: true,
      });
      window.shebei = new Cesium.Cesium3DTileset({
        url: this.publicPath + "shebei/tileset.json",
      });
      window.shebei.style = new Cesium.Cesium3DTileStyle({
        color: "rgba(7,91,139,0.3)",
        show: true,
      });
      window.biglabel = new Cesium.Cesium3DTileset({
        url: this.publicPath + "biglabel/tileset.json",
      });
      window.smalllabel = new Cesium.Cesium3DTileset({
        url: this.publicPath + "smalllabel/tileset.json",
      });
      window.smalllabel.style = new Cesium.Cesium3DTileStyle({
        color: "rgb(253,252,252)",
        show: true,
      });
      let models = [];
      //载入上面设置的模型
      models.push(
        window.shebei,
        window.biglabel,
        window.smalllabel,
        window.fm,
        window.gx,
        window.bg
      );

      let lng = 121.0659753;
      let lat = 37.7115078;
      let hei = 0;
      let rx = 0;
      let ry = 0;
      let rz = 0;

      let mx = Cesium.Matrix3.fromRotationX(Cesium.Math.toRadians(rx));
      let my = Cesium.Matrix3.fromRotationY(Cesium.Math.toRadians(ry));
      let mz = Cesium.Matrix3.fromRotationZ(Cesium.Math.toRadians(rz));
      let rotationX = Cesium.Matrix4.fromRotationTranslation(mx);
      let rotationY = Cesium.Matrix4.fromRotationTranslation(my);
      let rotationZ = Cesium.Matrix4.fromRotationTranslation(mz);
      // 模型中心位置
      let position = Cesium.Cartesian3.fromDegrees(lng, lat, hei);
      let m = Cesium.Transforms.eastNorthUpToFixedFrame(position);
      //旋转、平移矩阵相乘
      Cesium.Matrix4.multiply(m, rotationX, m);
      Cesium.Matrix4.multiply(m, rotationY, m);
      Cesium.Matrix4.multiply(m, rotationZ, m);
      // 缩放
      let scale = Cesium.Matrix4.fromUniformScale(1);
      Cesium.Matrix4.multiply(m, scale, m);
      //在viewer中添加所有模型
      models.forEach((i) => {
        window.viewer.scene.primitives.add(i);
        i.readyPromise.then(() => {
          i._root.transform = m;
          i.colorBlendMode = Cesium.Cesium3DTileColorBlendMode.REPLACE;
        });
        // this.initEventListener(i);
      });
      // this.getview();
      this.selectentity = new selectEntity(window.viewer);
      this.selectentity.selectEntityHighLight();
      this.creatpoly();
      this.addLabel();
    },
    //测试使用的方法，定义点击事件，选取坐标点并向tempPosition中存入选取的坐标
    getview() {
      this.handler = new Cesium.ScreenSpaceEventHandler(
        window.viewer.scene.canvas
      );
      let a = 0;
      this.handler.setInputAction((e) => {
        a = a + 1;
        let position = window.viewer.scene.pickPosition(e.position);
        let pickedFeature = window.viewer.scene.pick(e.position);
        if (pickedFeature instanceof Cesium.Cesium3DTileFeature) {
          //将笛卡尔坐标转化为经纬度坐标
          let cartographic = Cesium.Cartographic.fromCartesian(position);
          let x = Cesium.Math.toDegrees(cartographic.longitude);
          let y = Cesium.Math.toDegrees(cartographic.latitude);
          let z = cartographic.height;
          //存入选取坐标经纬度
          this.tempPosition.push(x, y, 55.5);
          //在点击位置添加一个标识
          let Entity = window.viewer.entities.add({
            position: Cesium.Cartesian3.fromDegrees(x, y, 55.5),
            point: {
              pixelSize: 5,
              color: Cesium.Color.YELLOW,
            },
            label: {
              text: "点：" + a,
              font: "14pt Source Han Sans CN",
              fillColor: Cesium.Color.BLACK,
              backgroundColor: Cesium.Color.AQUA,
              showBackground: true,
              style: Cesium.LabelStyle.FILL,
              verticalOrigin: Cesium.VerticalOrigin.CENTER,
              horizontalOrigin: Cesium.HorizontalOrigin.LEFT,
              pixelOffset: new Cesium.Cartesian2(10, 2),
            },
          });
        } else {
          console.log("点不准确，重新选点");
          a = a - 1;
        }
        //获取点击时相机角度，用于设置相机初始位置
        let h = window.viewer.camera.heading;
        let p = window.viewer.camera.pitch;
        let r = window.viewer.camera.roll;
        console.log("heading:" + h);
        console.log("pitch:" + p);
        console.log("roll:" + r);
      }, Cesium.ScreenSpaceEventType.LEFT_CLICK);
    },
    creatpoly() {
      function PolylineTrailLinkMaterialProperty(color, duration, d) {
        this._definitionChanged = new Cesium.Event();
        this._color = undefined;
        this._colorSubscription = undefined;
        this.color = color;
        this.duration = duration || 3000;
        this._time = new Date().getTime();
        this._d = d;
        this.isTranslucent = function () {
          return true;
        };
      }

      Object.defineProperties(PolylineTrailLinkMaterialProperty.prototype, {
        isConstant: {
          get: function () {
            return false;
          },
        },
        definitionChanged: {
          get: function () {
            return this._definitionChanged;
          },
        },
        color: Cesium.createPropertyDescriptor("color"),
      });
      PolylineTrailLinkMaterialProperty.prototype.getType = function (time) {
        return "PolylineTrailLink";
      };
      PolylineTrailLinkMaterialProperty.prototype.getValue = function (
        time,
        result
      ) {
        if (!Cesium.defined(result)) {
          result = {};
        }
        result.color = Cesium.Property.getValueOrClonedDefault(
          this._color,
          time,
          Cesium.Color.WHITE,
          result.color
        );
        result.image = Cesium.Material.PolylineTrailLinkImage;
        result.time =
          (((new Date().getTime() - this._time) % this.duration) /
            this.duration) *
          this._d;
        return result;
      };
      PolylineTrailLinkMaterialProperty.prototype.equals = function (other) {
        return (
          this === other ||
          (other instanceof PolylineTrailLinkMaterialProperty &&
            Property.equals(this._color, other._color))
        );
      };

      Cesium.PolylineTrailLinkMaterialProperty =
        PolylineTrailLinkMaterialProperty;
      Cesium.Material.PolylineTrailLinkType = "PolylineTrailLink";
      Cesium.Material.PolylineTrailLinkImage = require("../assets/1.png");
      Cesium.Material.PolylineTrailLinkSource =
        " czm_material czm_getMaterial(czm_materialInput materialInput)\n\
                                                        {\n\
                                                            czm_material material = czm_getDefaultMaterial(materialInput);\n\
                                                            vec2 st = materialInput.st;\n\
                                                            vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\n\
                                                            material.alpha = colorImage.a * color.a;\n\
                                                            material.diffuse = (colorImage.rgb+color.rgb)/2.0;\n\
                                                            return material;\n\
                                                        }";
      Cesium.Material._materialCache.addMaterial(
        Cesium.Material.PolylineTrailLinkType,
        {
          fabric: {
            type: Cesium.Material.PolylineTrailLinkType,
            uniforms: {
              color: new Cesium.Color(0.0, 0.0, 1.0, 0.5),
              image: Cesium.Material.PolylineTrailLinkImage,
              time: -20,
            },
            source: Cesium.Material.PolylineTrailLinkSource,
          },
          translucent: function (material) {
            return true;
          },
        }
      );

      let material = new Cesium.PolylineTrailLinkMaterialProperty(
        Cesium.Color.CORNFLOWERBLUE,
        5000,
        1
      );

      // this.creatpolyline(this.ways01, material);
      let entity01 = window.viewer.entities.add({
        polyline: {
          positions: Cesium.Cartesian3.fromDegreesArrayHeights(this.ways01),
          width: 8,
          material: material,
        },
      });
      let positions = [
        this.ways12,
        this.ways23,
        this.ways34,
        this.ways45,
        this.ways5e,
      ];
      let P = [
        this.ways0001,
        this.ways0002,
        this.ways0003,
        this.ways0004,
        this.ways0005,
        this.ways0006,
        this.ways0007,
        this.ways0008,
        this.ways0009,
        this.ways0010,
        this.ways0011,
        this.ways0012,
        this.ways0013,
        this.ways0014,
        this.ways0015,
        this.ways0016,
        this.ways0017,
        this.ways0018,
        this.ways0019,
        this.ways0020,
        this.ways0021,
        this.ways0022,
        this.ways0023,
        this.ways0024,
        this.ways0025,
        this.ways0026,
        this.ways0027,
        this.ways0028,
        this.ways0029,
        this.ways0030,
        this.ways0031,
        this.ways0032,
        this.ways0033,
        this.ways0034,
        this.ways0035,
        this.ways0036,
        this.ways0037,
        this.ways0038,
        this.ways0039,
        this.ways0040,
        this.ways0041,
        this.ways0042,
        this.ways0043,
        this.ways0044,
        this.ways0045,
        this.ways0046,
        this.ways0047,
        this.ways0048,
        this.ways0049,
        this.ways0050,
        this.ways0051,
        this.ways0052,
        this.ways0053,
        this.ways0054,
        this.ways0055,
        this.ways0056,
        this.ways0057,
        this.ways0058,
        this.ways0059,
        this.ways0060,
        this.ways0061,
        this.ways0062,
        this.ways0063,
        this.ways0064,
        this.ways0065,
        this.ways0066,
        this.ways0067,
        this.ways0068,
        this.ways0069,
        this.ways0070,
        this.ways0071,
        this.ways0072,
        this.ways0073,
        this.ways0074,
        this.ways0075,
        this.ways0076,
        this.ways0077,
        this.ways0078,
        this.ways0079,
        this.ways0080,
        this.ways0081,
        this.ways0082,
        this.ways0083,
        this.ways0084,
        this.ways0085,
        this.ways0086,
        this.ways0087,
        this.ways0088,
        this.ways0089,
        this.ways0090,
        this.ways0091,
        this.ways0092,
        this.ways0092,
        this.ways0093,
        this.ways0094,
        this.ways0095,
        this.ways0096,
        this.ways0097,
        this.ways0098,
        this.ways0099,
        this.ways0100,
        this.ways0101,
        this.ways0102,
        this.ways0103,
        this.ways0104,
        this.ways0105,
        this.ways0106,
        this.ways0107,
        this.ways0108,
        this.ways0109,
        this.ways0110,
        this.ways0111,
        this.ways0112,
        this.ways0113,
        this.ways0114,
        this.ways0115,
        this.ways0116,
        this.ways0117,
        this.ways0118,
        this.ways0119,
      ];
      let P1 = [
        this.ways0120,
        this.ways0121,
        this.ways0122,
        this.ways0123,
        this.ways0124,
        this.ways0125,
        this.ways0126,
        this.ways0127,
        this.ways0128,
        this.ways0129,
        this.ways0130,
        this.ways0131,
        this.ways0132,
        this.ways0133,
        this.ways0134,
        this.ways0135,
        this.ways0136,
        this.ways0137,
        this.ways0138,
        this.ways0139,
        this.ways0140,
        this.ways0141,
        this.ways0142,
        this.ways0143,
        this.ways0144,
        this.ways0145,
        this.ways0146,
        this.ways0147,
        this.ways0148,
        this.ways0149,
        this.ways0150,
        this.ways0151,
        this.ways0152,
        this.ways0153,
        this.ways0154,
        this.ways0155,
        this.ways0156,
        this.ways0157,
        this.ways0158,
        this.ways0159,
        this.ways0160,
        this.ways0161,
        this.ways0162,
        this.ways0163,
        this.ways0164,
        this.ways0165,
        this.ways0166,
        this.ways0167,
        this.ways0168,
        this.ways0169,
        this.ways0170,
        this.ways0171,
        this.ways0172,
        this.ways0173,
        this.ways0174,
        this.ways0175,
        this.ways0176,
        this.ways0177,
        this.ways0178,
        this.ways0179,
        this.ways0180,
        this.ways0181,
        this.ways0182,
        this.ways0183,
        this.ways0184,
        this.ways0185,
        this.ways0186,
        this.ways0187,
        this.ways0188,
        this.ways0189,
        this.ways0190,
        this.ways0191,
        this.ways0192,
        this.ways0193,
        this.ways0194,
        this.ways0195,
        this.ways0196,
        this.ways0197,
        this.ways0198,
        this.ways0199,
        this.ways0200,
      ];
      let P2 = [
        this.ways0201,
        this.ways0202,
        this.ways0203,
        this.ways0204,
        this.ways0205,
        this.ways0206,
        this.ways0207,
        this.ways0208,
        this.ways0209,
        this.ways0210,
        this.ways0211,
        this.ways0212,
        this.ways0213,
        this.ways0214,
        this.ways0215,
        this.ways0216,
        this.ways0217,
        this.ways0218,
        this.ways0219,
        this.ways0220,
        this.ways0221,
        this.ways0222,
        this.ways0223,
        this.ways0224,
        this.ways0225,
        this.ways0226,
        this.ways0227,
        this.ways0228,
        this.ways0229,
        this.ways0230,
        this.ways0231,
        this.ways0232,
        this.ways0233,
        this.ways0234,
        this.ways0235,
        this.ways0236,
        this.ways0237,
        this.ways0238,
        this.ways0239,
        this.ways0240,
        this.ways0241,
        this.ways0242,
        this.ways0243,
        this.ways0244,
        this.ways0245,
        this.ways0246,
        this.ways0247,
        this.ways0248,
        this.ways0249,
        this.ways0250,
        this.ways0251,
        this.ways0252,
        this.ways0253,
        this.ways0254,
        this.ways0255,
        this.ways0256,
        this.ways0257,
        this.ways0258,
        this.ways0259,
        this.ways0260,
        this.ways0261,
        this.ways0262,
        this.ways0263,
        this.ways0264,
        this.ways0265,
        this.ways0266,
        this.ways0267,
        this.ways0268,
        this.ways0269,
        this.ways0270,
        this.ways0271,
        this.ways0272,
        this.ways0273,
        this.ways0274,
        this.ways0275,
        this.ways0276,
        this.ways0277,
        this.ways0278,
        this.ways0279,
        this.ways0280,
        this.ways0281,
        this.ways0282,
        this.ways0283,
        this.ways0284,
        this.ways0285,
        this.ways0286,
        this.ways0287,
        this.ways0288,
        this.ways0289,
        this.ways0290,
        this.ways0291,
        this.ways0292,
        this.ways0293,
        this.ways0294,
        this.ways0295,
        this.ways0296,
        this.ways0297,
        this.ways0298,
        this.ways0299,
        this.ways0300,
        this.ways0301,
        this.ways0302,
        this.ways0303,
        this.ways0304,
        this.ways0305,
        this.ways0306,
        this.ways0307,
        this.ways0308,
        this.ways0309,
        this.ways0310,
        this.ways0311,
        // this.ways0312,
      ];
      this.creatpolyline(positions, material);
      this.creatpolyline01(P, material);
      this.creatpolyline01(P1, material);
      this.creatpolyline01(P2, material);
    }, //按照路径在管线中添加流动材质
    creatpolyline(positions, material) {
      for (let i = 0; i < positions.length; i++) {
        let floatEntity = window.viewer.entities.add({
          polyline: {
            positions: Cesium.Cartesian3.fromDegreesArrayHeights(positions[i]),
            width: 8,
            material: material,
          },
        });
        this.entityCollection.push(floatEntity);
      }
    }, //添加流动材质
    creatpolyline01(positions, material) {
      for (let i = 0; i < positions.length; i++) {
        let floatEntity = window.viewer.entities.add({
          polyline: {
            positions: Cesium.Cartesian3.fromDegreesArrayHeights(positions[i]),
            width: 8,
            material: material,
          },
        });
      }
    },
    initEventListener(tileset) {
      tileset.tileLoad.addEventListener((tile) => {
        processTileFeatures(tile);
      });
      // this.propertyName.forEach((j)=>{
      //   console.log(j)
      //   let name1=j.substring(0,2)
      //   console.log(name1);
      // });
      let processTileFeatures = (tile) => {
        let content = tile.content;
        let innerContents = content.innerContents;
        if (Cesium.defined(innerContents)) {
          let length = innerContents.length;
          for (let i = 0; i < length; ++i) {
            processContentFeatures(innerContents[i]);
          }
        } else {
          processContentFeatures(content);
        }
      };
      let processContentFeatures = (content) => {
        let featuresLength = content.featuresLength;
        for (let i = 0; i < featuresLength; ++i) {
          this.newCesium3DTileFeature = content.getFeature(i);
          this.cesium3dtile.push(this.newCesium3DTileFeature);
          this.propertyName.push(
            this.newCesium3DTileFeature.getProperty("name")
          );
          // if(i === featuresLength - 1){
          //   for(let j=0;j<this.propertyName.length;j++){
          //     if(this.propertyName[j].substring(0,2)==='管线'){
          //       console.log(this.cesium3dtile[j]);
          //       this.cesium3dtile[j].style = new Cesium.Cesium3DTileStyle({
          //         color: "rgb(255,255,0)",
          //         show: true,
          //       });
          //     }
          //   }
          // }
        }
      };
    }, //监听返回feature对象
    outputlatlng() {
      console.log(this.tempPosition);
    },
    closePopup() {
      this.popupFmshow = false;
    },
    //查找所有阀门中第一个关闭的，返回序号
    luoj() {
      let flagMaterial = -1;
      let fmStatearr = [
        this.fmState.fm01,
        this.fmState.fm02,
        this.fmState.fm03,
        this.fmState.fm04,
        this.fmState.fm05,
      ];
      for (let i = 0; i < fmStatearr.length; i++) {
        if (fmStatearr[i] === 0) {
          flagMaterial = i;
          break;
        }
      }
      return flagMaterial;
    },
    //改变开关状态后，更改管线颜色
    changePipelinestyle() {
      let fmSetstate = $('input:radio[name="fmState"]:checked').val();
      let flag = 0;
      for (let key in this.fmState) {
        if (key.includes(String(this.fmNumber))) {
          if (!Number(fmSetstate)) {
            this.fmState[key] = 0;
            flag = 1;
          } else {
            this.fmState[key] = 1;
            flag = 1;
          }
        }
      }
      if (!flag) {
        return;
      } else {
        let fmIndex = this.luoj();

        //渲染管线样式
        let s12 = "${xuhao}===" + "'1_2'";
        let s23 = "${xuhao}===" + "'2_3'";
        let s34 = "${xuhao}===" + "'3_4'";
        let s45 = "${xuhao}===" + "'4_5'";
        let s5e = "${xuhao}===" + "'5_end'";
        const s = [s12, s23, s34, s45, s5e];
        let s_xuhao = ["1_2", "2_3", "3_4", "4_5", "5_end"];
        let sArr = [];
        let a = -1;
        let b = -1;
        if (fmIndex === -1) {
          a = s.length;
        } else {
          a = fmIndex;
          b = fmIndex;
        }
        sArr = s.slice(a, s.length);

        this.xuhao = s_xuhao.slice(a, s.length);
        this.selectentity.setXuhao(this.xuhao);

        this.pipelineStyle(sArr);
        this.sArr01 = sArr;
        this.selectentity.setS(this.sArr01);

        //渲染流动材质
        if (b === -1) {
          for (let j = 0; j < this.entityCollection.length; j++) {
            this.entityCollection[j].show = true;
          }
        } else if (b !== 0) {
          for (let i = 0; i < b; i++) {
            this.entityCollection[i].show = true;
          }
          for (b; b < this.entityCollection.length; b++) {
            this.entityCollection[b].show = false;
          }
        } else {
          for (b; b < this.entityCollection.length; b++) {
            this.entityCollection[b].show = false;
          }
        }
      }
      this.popupFmshow = false;
    },
    pipelineStyle(s) {
      if (s.length) {
        const conditions = s.map((item) => {
          return [item, "rgb(170,9,65)"];
        });
        window.gx.style = new Cesium.Cesium3DTileStyle({
          color: {
            conditions: [...conditions, [true, "rgba(158,183,208,0.5)"]],
          },
        });
      } else {
        window.gx.style = new Cesium.Cesium3DTileStyle({
          color: "rgba(158,183,208,0.5)",
          show: true,
        });
      }
    },
    addLabel() {
      let labelPositions = [
        121.03306208996135, 37.70791721625398, 55.5, 121.04027599938071,
        37.70791902759864, 55.5, 121.04220552073237, 37.70295050149772, 55.5,
        121.0359702392195, 37.70294887189714, 55.5, 121.02797433300833,
        37.69745077400395, 55.5,
      ];
      let a = 1;
      for (let i = 0; i < labelPositions.length - 2; i = i + 3) {
        let Entity01 = window.viewer.entities.add({
          position: Cesium.Cartesian3.fromDegrees(
            labelPositions[i],
            labelPositions[i + 1],
            labelPositions[i + 2]
          ),
          point: {
            pixelSize: 5,
            color: Cesium.Color.YELLOW,
          },
          label: {
            text: "阀门0" + a,
            font: "14pt Source Han Sans CN",
            fillColor: Cesium.Color.BLACK,
            backgroundColor: Cesium.Color.AQUA,
            showBackground: true,
            style: Cesium.LabelStyle.FILL,
            verticalOrigin: Cesium.VerticalOrigin.CENTER,
            horizontalOrigin: Cesium.HorizontalOrigin.LEFT,
            pixelOffset: new Cesium.Cartesian2(10, 2),
          },
        });
        a++;
      }
    },
    getBack() {
      window.viewer.camera.setView({
        destination: Cesium.Cartesian3.fromDegrees(
          121.06487993541327,
          37.698367551958015,
          11000
        ), //转换为世界坐标
        orientation: {
          heading: 6.281351946946347,
          pitch: -1.558636315283755,
          roll: 0,
        },
      });
    },
  },
};
</script>

<style scoped>
.box {
  width: 100%;
  height: 100%;
}

#mapContainer {
  width: 100vw;
  height: 100vh;
}
.btn {
  position: absolute;
  margin-left: 100px;
  margin-top: 50px;
  width: 100px;
  height: 50px;
  z-index: 999;
}
.bx-popup-ctn {
  position: absolute;
  z-index: 999;
  background: #fff;
}
.bx-popup-tip-container {
  width: 40px;
  height: 20px;
  position: absolute;
  left: 50%;
  margin-left: -20px;
  overflow: hidden;
  pointer-events: none;
}
.bx-popup-tip {
  width: 17px;
  background: #fff;
  height: 17px;
  padding: 1px;
  margin: -10px auto 0;
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  transform: rotate(45deg);
}
.bx-popup-header-ctn {
  background: #090302;
  color: #fff;
  font-size: 15px;
  padding: 4px;
}
.bx-popup-content-ctn {
  padding: 15px;
}
.leaflet-popup-close-button {
  user-select: auto;
  position: absolute;
  right: 0;
  top: 0;
  color: #fff;
  cursor: pointer;
}
.zhezhao {
  height: 100vh;
  width: 100vw;
  position: absolute;
  top: 0;
  z-index: 99999;
  background-color: rgba(69, 69, 69, 0.51);
}
.popup_fm {
  width: 330px;
  height: 260px;

  position: absolute;
  top: 50vh;
  left: 50vw;
  transform: translate(-50%, -50%);
}
.pop_head {
  position: relative;
  width: 100%;
  height: 30px;
  background-color: rgba(71, 129, 179, 0.69);
  text-align: center;
  line-height: 30px;
}
.close_btn {
  position: absolute;
  right: 10px;
  top: 15px;
  transform: translate(0, -50%);
  background-color: rgba(255, 255, 255, 0);
  border: none;
}
.pop_body {
  position: relative;
  width: 100%;
  height: 230px;
  background-color: rgba(124, 146, 189, 0.6);
}
.fm_name {
  position: absolute;
  margin-top: 36px;
  margin-left: 44px;
}
.fm_state {
  position: absolute;
  margin-top: 81px;
  margin-left: 44px;
}
.submit {
  position: absolute;
  margin-top: 153px;
  margin-left: 66px;
  width: 50px;
  height: 30px;
  background-color: #344d8d;
  border: none;
}
.submit:hover {
  background-color: #143792;
}
.cancle {
  position: absolute;
  margin-top: 153px;
  margin-left: 215px;
  width: 50px;
  height: 30px;
  background-color: #344d8d;
  border: none;
}
.cancle:hover {
  background-color: #143792;
}
</style>
